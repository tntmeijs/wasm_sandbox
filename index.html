<!DOCTYPE html>
<html>
    <head>
        <title>WASM Sandbox</title>

        <!-- That's right! Where we're going we don't need no fancy frameworks ;) -->
        <link href="./style.css" rel="stylesheet" />
    </head>

    <body>
        <section>
            <h1>WebAssembly sandbox</h1>
            <p>
                Welcome to my WebAssembly sandbox! This page is meant to be used as a very simple way to quickly test how much
                faster WebAssembly modules are compared to (minified) JavaScript.
            </p>
            <p>
                This "application" is able to perform calculations on a big dataset. How big this dataset is going to be will depend
                on the options you select in the tool down below.
            </p>
            <p>
                Once you're done, check out the section at the bottom of the page where you can run the business logic on your
                dataset. Please do keep in mind that it's impossible to change the way the business logic works. You can only change
                the size of your input dataset.
            </p>
            <p>
                Lastly, make sure to check out
                <a href="https://github.com/tntmeijs/wasm_sandbox" target="_blank">https://github.com/tntmeijs/wasm_sandbox</a>
                to inspect the source code of this application. Everything is open-source and licensed under the
                <a href="https://tldrlegal.com/license/mit-license" target="_blank">MIT</a> license. :)
            </p>
        </section>

        <section>
            <h3>Running this application locally</h3>
            <p>
                Install the <a href="https://www.rust-lang.org/tools/install" target="_blank">Rust</a> programming language
            </p>
            <p>
                Install <a href="https://github.com/rustwasm/wasm-pack" target="_blank">wasm-pack</a> to help us compile Rust
                into WebAssembly
            <p>
                Install any webserver so we can serve this website - I like to use
                <a href="https://www.npmjs.com/package/http-server" target="_blank">http-server</a>
            </p>
            <p>
                <code>cd wasm_sandbox/rs_parser</code>
            </p>
            <p>
                <code>wasm-pack build --target web</code>
            </p>
            <p>
                Run the HTTP server and serve everything in the repository's root folder
            </p>
        </section>

        <section>
            <h3>Generate dataset</h3>

            <form>
                <div>
                    <label>Number of rows:</label>
                    <input type="number" id="row-count" name="row-count" min="1" value="1" />
                </div>

                <br />

                <div>
                    <input type="submit" id="generate-dataset" class="button" value="generate" />
                </div>
            </form>

            <br />

            <div id="dataset-preview-root"></div>
        </section>

        <section>
            <h3>Run business logic</h3>

            <div class="side-by-side">
                <div>
                    <h6>WebAssembly</h6>
                    <div>
                        <input type="button" id="load-wasm-module" value="load module" class="button" />
                        <label class="action-time" id="load-wasm-module-time"></label>
                    </div>
                    <div>
                        <input type="button" id="initialize-wasm-module" value="initialize module" class="button" />
                        <label class="action-time" id="initialize-wasm-module-time"></label>
                    </div>
                    <div>
                        <input type="button" id="execute-wasm-module" value="execute" class="button" />
                        <label class="action-time" id="execute-wasm-module-time"></label>
                    </div>
                </div>

                <div>
                    <h6>JavaScript</h6>
                    <div>
                        <input type="button" id="load-js-module" value="load module" class="button" />
                        <label class="action-time" id="load-js-module-time"></label>
                    </div>
                    <div>
                        <input type="button" id="execute-js-module" value="execute" class="button" />
                        <label class="action-time" id="execute-js-module-time"></label>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h3>Console</h3>
            <div id="console"></div>
        </section>

        <footer>
            <div>
                <a href="https://github.com/tntmeijs/wasm_sandbox" target="_blank">view source code</a>
                or
                <a href="https://linkedin.com/in/tntmeijs" target="_blank">contact me</a>
            </div>
        </footer>

        <script src="./app.js"></script>
    </body>
</html>
