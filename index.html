<!DOCTYPE html>
<html>
    <head>
        <title>WASM Sandbox</title>

        <!-- That's right! Where we're going we don't need no fancy frameworks ;) -->
        <link href="./style.css" rel="stylesheet" />
    </head>

    <body>
        <section>
            <h1>WebAssembly sandbox</h1>
            <p>
                Welcome to my WebAssembly sandbox! This page is meant to be used as a very simple way to quickly test how much
                faster WebAssembly modules are compared to (minified) JavaScript.
            </p>
            <p>
                This "application" is able to perform calculations on a big dataset. How big this dataset is going to be will depend
                on the options you select in the tool down below.
            </p>
            <p>
                Once you're done, head on over to the section at the bottom of the page where you can run the business logic on your
                dataset. Please do keep in mind that it's impossible to change the way the business logic works. You can only change
                the size of your input dataset.
            </p>
            <p>
                Lastly, make sure to head check out
                <a href="https://github.com/tntmeijs/wasm_sandbox" target="_blank">https://github.com/tntmeijs/wasm_sandbox</a>
                to inspect the source code of this application. Everything is open-source and licensed under the
                <a href="https://tldrlegal.com/license/mit-license" target="_blank">MIT</a> license. :)
            </p>
        </section>

        <section>
            <h3>Running this application locally</h3>
            <p>
                Install the <a href="https://www.rust-lang.org/tools/install" target="_blank">Rust</a> programming language
            </p>
            <p>
                Install <a href="https://github.com/rustwasm/wasm-pack" target="_blank">wasm-pack</a> to help us compile Rust
                into WebAssembly
            <p>
                Install any webserver so we can serve this website - I like to use
                <a href="https://www.npmjs.com/package/http-server" target="_blank">http-server</a>
            </p>
            <p>
                <code>cd wasm_sandbox/rs_parser</code>
            </p>
            <p>
                <code>wasm-pack build --target web</code>
            </p>
            <p>
                Run the HTTP server and serve everything in the repository's root folder
            </p>
        </section>

        <section>
            <h3>About WebAssembly</h3>
            <p>
                WebAssembly is a new type of code webbrowsers can execute. Up until now, almost everything on the web had to be
                created using either JavaScript or something like Flash, Java applets, or Silverlight. These days, JavaScript
                is quite literally almost everywhere. It even went to space!
            </p>
            <p>
                Does this mean that JavaScript is <i>the</i> perfect language? No, it doesn't and it isn't. All languages are
                good at what they're designed for. JavaScript was initially designed to add some dynamic functionality to
                webpages. Over the years, however, JavaScript has been adapted to run on the front-end, back-end, and on native
                platforms using frameworks such as Electron.
            </p>
            <p>
                Nowadays we have cool things such as live photo and video editors running in the browser. Unfortunately,
                JavaScript isn't the fastest language out there. As a result, highly demanding workloads may not run as well as
                you'd like them to. To address these performance needs, WebAssembly was created.
            </p>
            <p>
                Developers who work with compiled languages usually target ARM or x86 architectures. You could see WebAssembly
                as yet another platform compilers can target. By targetting WebAssmbly, developers can easily port their
                applications to the web. Additionally, instead of relying on the JavaScript JIT compiler to run things quickly,
                we can now generate a tiny and heavily opitmized binary file for the WebAssembly VM.
            </p>
        </section>

        <section>
            <h3>Generate dataset</h3>

            <form>
                <div>
                    <label>Number of rows:</label>
                    <input type="number" id="row-count" name="row-count" min="1" value="1" />
                </div>

                <br />

                <div>
                    <input type="submit" id="generate-dataset" class="button" value="generate" />
                </div>
            </form>

            <br />

            <div id="dataset-preview-root"></div>
        </section>

        <section>
            <h3>Run business logic</h3>

            <div class="side-by-side">
                <div>
                    <h6>WebAssembly</h6>
                    <span id="parse-result-wasm">...</span>
    
                    <div>
                        <input type="button" id="load-wasm-module" value="load module" class="button" />
                        <label class="action-time" id="load-wasm-module-time"></label>
                    </div>
                    <div>
                        <input type="button" id="initialize-wasm-module" value="initialize module" class="button" />
                        <label class="action-time" id="initialize-wasm-module-time"></label>
                    </div>
                    <div>
                        <input type="button" id="execute-wasm-module" value="execute" class="button" />
                        <label class="action-time" id="execute-wasm-module-time"></label>
                    </div>
                </div>

                <div>
                    <h6>JavaScript</h6>
                    <span id="parse-result-js">...</span>
    
                    <div>
                        <input type="button" id="load-js-module" value="load module" class="button" />
                        <label class="action-time" id="load-js-module-time"></label>
                    </div>
                    <div>
                        <input type="button" id="execute-js-module" value="execute" class="button" />
                        <label class="action-time" id="execute-js-module-time"></label>
                    </div>
                </div>

                <div>
                    <h6>JavaScript (minified)</h6>
                    <span id="parse-result-js-minified">...</span>
    
                    <div>
                        <input type="button" id="load-js-minified-module" value="load module" class="button" />
                        <label class="action-time" id="load-js-minified-module-time"></label>
                    </div>
                    <div>
                        <input type="button" id="execute-js-minified-module" value="execute" class="button" />
                        <label class="action-time" id="execute-js-minified-module-time"></label>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h3>Console</h3>
            <div id="console"></div>
        </section>

        <footer>
            <div>
                <a href="https://github.com/tntmeijs/wasm_sandbox" target="_blank">view source code</a>
                or
                <a href="https://linkedin.com/in/tntmeijs" target="_blank">contact me</a>
            </div>
        </footer>

        <script src="./app.js"></script>
    </body>
</html>
